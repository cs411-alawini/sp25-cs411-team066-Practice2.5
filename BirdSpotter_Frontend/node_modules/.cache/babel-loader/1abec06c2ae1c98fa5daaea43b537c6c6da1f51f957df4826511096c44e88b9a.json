{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lmm20\\\\sp25-cs411-team066\\\\BirdSpotter_Frontend\\\\src\\\\pages\\\\Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { usStates } from \"../utils/dummyData\";\nimport UserContext from \"../UserContext\";\nimport \"../styles/pages/Upload.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Upload() {\n  _s();\n  const navigate = useNavigate();\n  const fileInputRef = useRef(null);\n  const {\n    user\n  } = useContext(UserContext);\n  const [formData, setFormData] = useState({\n    bird_scientific_name: \"\",\n    latitude: \"\",\n    longitude: \"\",\n    Country: \"United States\",\n    State: \"\",\n    event_time: new Date().toISOString()\n  });\n  const [birdImage, setBirdImage] = useState(null);\n  const [imagePreview, setImagePreview] = useState(null);\n  const [imageError, setImageError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [uploadResult, setUploadResult] = useState(null);\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const validateCoordinates = (lat, lng) => {\n    var _lat$toString$split$, _lng$toString$split$;\n    if (isNaN(lat) || isNaN(lng)) {\n      throw new Error(\"Coordinates must be numbers\");\n    }\n    if (lat < -90 || lat > 90) {\n      throw new Error(\"Latitude must be between -90 and 90 degrees\");\n    }\n    if (lng < -180 || lng > 180) {\n      throw new Error(\"Longitude must be between -180 and 180 degrees\");\n    }\n    if (((_lat$toString$split$ = lat.toString().split(\".\")[1]) === null || _lat$toString$split$ === void 0 ? void 0 : _lat$toString$split$.length) > 6 || ((_lng$toString$split$ = lng.toString().split(\".\")[1]) === null || _lng$toString$split$ === void 0 ? void 0 : _lng$toString$split$.length) > 6) {\n      throw new Error(\"Coordinates can have at most 6 decimal places\");\n    }\n  };\n  const handleImageChange = event => {\n    const file = event.target.files[0];\n    setImageError(null);\n    if (!file) {\n      setBirdImage(null);\n      setImagePreview(null);\n      return;\n    }\n\n    // Check file type\n    if (!file.type.match(\"image.*\")) {\n      setImageError(\"Please upload an image file (JPEG, PNG, etc.)\");\n      return;\n    }\n\n    // Check file size (5MB limit)\n    const fileSize = file.size / 1024 / 1024; // size in MB\n    if (fileSize > 5) {\n      setImageError(\"Image size must be less than 5MB\");\n      return;\n    }\n\n    // Create image preview\n    const reader = new FileReader();\n    reader.onload = e => {\n      setImagePreview(e.target.result);\n    };\n    reader.readAsDataURL(file);\n    setBirdImage(file);\n  };\n  const handleRemoveImage = () => {\n    setBirdImage(null);\n    setImagePreview(null);\n    setImageError(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n  const simulateImageUpload = async image => {\n    // TODO: Replace with actual image upload to Google Cloud Storage\n    // const formData = new FormData();\n    // formData.append('image', image);\n    //\n    // return fetch('/api/upload/image', {\n    //   method: 'POST',\n    //   body: formData,\n    //   onUploadProgress: (progressEvent) => {\n    //     const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n    //     setUploadProgress(percentCompleted);\n    //   }\n    // }).then(response => response.json())\n    //   .then(data => data.imageUrl);\n\n    // This function simulates uploading an image to Google Cloud\n    return new Promise(resolve => {\n      const totalSteps = 10;\n      let currentStep = 0;\n      const interval = setInterval(() => {\n        currentStep++;\n        setUploadProgress(Math.round(currentStep / totalSteps * 100));\n        if (currentStep >= totalSteps) {\n          clearInterval(interval);\n          // Return a mock image URL\n          resolve(`https://storage.googleapis.com/mock-bucket/bird-${Date.now()}.jpg`);\n        }\n      }, 200);\n    });\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setLoading(true);\n    setError(null);\n    setUploadProgress(0);\n    try {\n      const lat = parseFloat(formData.latitude);\n      const lng = parseFloat(formData.longitude);\n      validateCoordinates(lat, lng);\n      if (!formData.bird_scientific_name) {\n        throw new Error(\"Please enter the bird scientific name\");\n      }\n      if (!formData.State) {\n        throw new Error(\"Please select a state\");\n      }\n      if (!birdImage) {\n        throw new Error(\"Please upload a bird image\");\n      }\n      if (!user || !user.user_id) {\n        throw new Error(\"User session expired. Please login again.\");\n      }\n      console.log(\"Current user context in Upload:\", user);\n      console.log(\"User ID being sent to upload API:\", user.user_id);\n      const formDataToSend = new FormData();\n      formDataToSend.append(\"file\", birdImage);\n      formDataToSend.append(\"bird_scientific_name\", formData.bird_scientific_name);\n      formDataToSend.append(\"latitude\", lat);\n      formDataToSend.append(\"longitude\", lng);\n      formDataToSend.append(\"country\", formData.Country);\n      formDataToSend.append(\"state\", formData.State);\n      formDataToSend.append(\"user_id\", user.user_id);\n      formDataToSend.append(\"event_time\", formData.event_time);\n      console.log(\"FormData being sent to upload API:\", {\n        bird_scientific_name: formData.bird_scientific_name,\n        latitude: lat,\n        longitude: lng,\n        country: formData.Country,\n        state: formData.State,\n        user_id: user.user_id,\n        event_time: formData.event_time\n      });\n      const response = await fetch(`/api/upload`, {\n        method: \"POST\",\n        body: formDataToSend\n      });\n      const responseData = await response.json();\n      console.log(\"Upload API Response:\", responseData);\n      if (!response.ok) {\n        throw new Error(responseData.message || \"Upload failed\");\n      }\n      if (responseData.status !== \"success\") {\n        throw new Error(responseData.message || \"Upload failed\");\n      }\n\n      // 保存上传结果并显示成功提示框\n      setUploadResult(responseData.data);\n      setShowSuccess(true);\n    } catch (err) {\n      console.error(\"Upload error:\", err);\n      setError(err.message || \"Upload failed\");\n    } finally {\n      setLoading(false);\n      setUploadProgress(0);\n    }\n  };\n  const handleSuccessConfirm = () => {\n    setShowSuccess(false);\n    navigate(\"/home\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Upload Bird Sighting\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 4\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"upload-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"bird_scientific_name\",\n          children: \"Bird Scientific Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"bird_scientific_name\",\n          name: \"bird_scientific_name\",\n          value: formData.bird_scientific_name,\n          onChange: handleInputChange,\n          required: true,\n          className: \"form-control\",\n          placeholder: \"Enter bird scientific name (e.g., Corvus brachyrhynchos)\",\n          maxLength: 150\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"bird_image\",\n          children: \"Bird Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"image-upload-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"bird_image\",\n            name: \"bird_image\",\n            accept: \"image/*\",\n            onChange: handleImageChange,\n            className: \"form-control file-input\",\n            ref: fileInputRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-upload-help\",\n            children: \"Maximum file size: 5MB. Accepted formats: JPEG, PNG, GIF.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 7\n          }, this), imageError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-error\",\n            children: imageError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 22\n          }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-preview-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: imagePreview,\n              alt: \"Bird preview\",\n              className: \"image-preview\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"remove-image-btn\",\n              onClick: handleRemoveImage,\n              children: \"Remove Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"latitude\",\n          children: \"Latitude\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"latitude\",\n          name: \"latitude\",\n          value: formData.latitude,\n          onChange: handleInputChange,\n          step: \"0.000001\",\n          required: true,\n          className: \"form-control\",\n          placeholder: \"Enter latitude (-90 to 90)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"longitude\",\n          children: \"Longitude\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"longitude\",\n          name: \"longitude\",\n          value: formData.longitude,\n          onChange: handleInputChange,\n          step: \"0.000001\",\n          required: true,\n          className: \"form-control\",\n          placeholder: \"Enter longitude (-180 to 180)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"Country\",\n          children: \"Country\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"Country\",\n          name: \"Country\",\n          value: formData.Country,\n          onChange: handleInputChange,\n          required: true,\n          className: \"form-control\",\n          disabled: true,\n          children: /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"United States\",\n            children: \"United States\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"State\",\n          children: \"State\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"State\",\n          name: \"State\",\n          value: formData.State,\n          onChange: handleInputChange,\n          required: true,\n          className: \"form-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select a state\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 7\n          }, this), usStates.map(state => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: state.name,\n            children: state.name\n          }, state.code, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 8\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 5\n      }, this), loading && uploadProgress > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload-progress\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-fill\",\n            style: {\n              width: `${uploadProgress}%`\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-text\",\n          children: [\"Uploading image: \", uploadProgress, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"submit-button\",\n        disabled: loading,\n        children: loading ? \"Uploading...\" : \"Upload Sighting\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 4\n    }, this), showSuccess && uploadResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"upload-success-message\",\n          children: \"Upload Successful!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"success-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Event ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: uploadResult.event_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Image ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: uploadResult.image_id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Bird Scientific Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: uploadResult.bird_info.bird_scientific_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Total Events\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: [uploadResult.bird_info.event_count, \" sightings\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detail-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-label\",\n              children: \"Total Images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"detail-value\",\n              children: [uploadResult.bird_info.image_count, \" photos\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 7\n        }, this), uploadResult.bird_info.related_birds.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"related-birds\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Related Birds\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: uploadResult.bird_info.related_birds.map((bird, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: bird.bird_scientific_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 12\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [bird.event_count, \" sightings\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 12\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 11\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"confirm-button\",\n          onClick: handleSuccessConfirm,\n          children: \"Back to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 3\n  }, this);\n}\n_s(Upload, \"yYnlCqCvcjOn0IS4zR3bGHNcgtY=\", false, function () {\n  return [useNavigate];\n});\n_c = Upload;\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","useRef","useContext","useNavigate","usStates","UserContext","jsxDEV","_jsxDEV","Upload","_s","navigate","fileInputRef","user","formData","setFormData","bird_scientific_name","latitude","longitude","Country","State","event_time","Date","toISOString","birdImage","setBirdImage","imagePreview","setImagePreview","imageError","setImageError","loading","setLoading","error","setError","uploadProgress","setUploadProgress","showSuccess","setShowSuccess","uploadResult","setUploadResult","handleInputChange","event","name","value","target","prev","validateCoordinates","lat","lng","_lat$toString$split$","_lng$toString$split$","isNaN","Error","toString","split","length","handleImageChange","file","files","type","match","fileSize","size","reader","FileReader","onload","e","result","readAsDataURL","handleRemoveImage","current","simulateImageUpload","image","Promise","resolve","totalSteps","currentStep","interval","setInterval","Math","round","clearInterval","now","handleSubmit","preventDefault","parseFloat","user_id","console","log","formDataToSend","FormData","append","country","state","response","fetch","method","body","responseData","json","ok","message","status","data","err","handleSuccessConfirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","id","onChange","required","placeholder","maxLength","accept","ref","src","alt","onClick","step","disabled","map","code","style","width","event_id","image_id","bird_info","event_count","image_count","related_birds","bird","index","_c","$RefreshReg$"],"sources":["C:/Users/lmm20/sp25-cs411-team066/BirdSpotter_Frontend/src/pages/Upload.js"],"sourcesContent":["import React, { useState, useRef, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { usStates } from \"../utils/dummyData\";\r\nimport UserContext from \"../UserContext\";\r\nimport \"../styles/pages/Upload.css\";\r\n\r\nfunction Upload() {\r\n\tconst navigate = useNavigate();\r\n\tconst fileInputRef = useRef(null);\r\n\tconst { user } = useContext(UserContext);\r\n\r\n\tconst [formData, setFormData] = useState({\r\n\t\tbird_scientific_name: \"\",\r\n\t\tlatitude: \"\",\r\n\t\tlongitude: \"\",\r\n\t\tCountry: \"United States\",\r\n\t\tState: \"\",\r\n\t\tevent_time: new Date().toISOString(),\r\n\t});\r\n\r\n\tconst [birdImage, setBirdImage] = useState(null);\r\n\tconst [imagePreview, setImagePreview] = useState(null);\r\n\tconst [imageError, setImageError] = useState(null);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState(null);\r\n\tconst [uploadProgress, setUploadProgress] = useState(0);\r\n\tconst [showSuccess, setShowSuccess] = useState(false);\r\n\tconst [uploadResult, setUploadResult] = useState(null);\r\n\r\n\tconst handleInputChange = (event) => {\r\n\t\tconst { name, value } = event.target;\r\n\t\tsetFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: value,\r\n\t\t}));\r\n\t};\r\n\r\n\tconst validateCoordinates = (lat, lng) => {\r\n\t\tif (isNaN(lat) || isNaN(lng)) {\r\n\t\t\tthrow new Error(\"Coordinates must be numbers\");\r\n\t\t}\r\n\t\tif (lat < -90 || lat > 90) {\r\n\t\t\tthrow new Error(\"Latitude must be between -90 and 90 degrees\");\r\n\t\t}\r\n\t\tif (lng < -180 || lng > 180) {\r\n\t\t\tthrow new Error(\"Longitude must be between -180 and 180 degrees\");\r\n\t\t}\r\n\t\tif (\r\n\t\t\tlat.toString().split(\".\")[1]?.length > 6 ||\r\n\t\t\tlng.toString().split(\".\")[1]?.length > 6\r\n\t\t) {\r\n\t\t\tthrow new Error(\"Coordinates can have at most 6 decimal places\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleImageChange = (event) => {\r\n\t\tconst file = event.target.files[0];\r\n\t\tsetImageError(null);\r\n\r\n\t\tif (!file) {\r\n\t\t\tsetBirdImage(null);\r\n\t\t\tsetImagePreview(null);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check file type\r\n\t\tif (!file.type.match(\"image.*\")) {\r\n\t\t\tsetImageError(\"Please upload an image file (JPEG, PNG, etc.)\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check file size (5MB limit)\r\n\t\tconst fileSize = file.size / 1024 / 1024; // size in MB\r\n\t\tif (fileSize > 5) {\r\n\t\t\tsetImageError(\"Image size must be less than 5MB\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Create image preview\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onload = (e) => {\r\n\t\t\tsetImagePreview(e.target.result);\r\n\t\t};\r\n\t\treader.readAsDataURL(file);\r\n\r\n\t\tsetBirdImage(file);\r\n\t};\r\n\r\n\tconst handleRemoveImage = () => {\r\n\t\tsetBirdImage(null);\r\n\t\tsetImagePreview(null);\r\n\t\tsetImageError(null);\r\n\t\tif (fileInputRef.current) {\r\n\t\t\tfileInputRef.current.value = \"\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst simulateImageUpload = async (image) => {\r\n\t\t// TODO: Replace with actual image upload to Google Cloud Storage\r\n\t\t// const formData = new FormData();\r\n\t\t// formData.append('image', image);\r\n\t\t//\r\n\t\t// return fetch('/api/upload/image', {\r\n\t\t//   method: 'POST',\r\n\t\t//   body: formData,\r\n\t\t//   onUploadProgress: (progressEvent) => {\r\n\t\t//     const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n\t\t//     setUploadProgress(percentCompleted);\r\n\t\t//   }\r\n\t\t// }).then(response => response.json())\r\n\t\t//   .then(data => data.imageUrl);\r\n\r\n\t\t// This function simulates uploading an image to Google Cloud\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tconst totalSteps = 10;\r\n\t\t\tlet currentStep = 0;\r\n\r\n\t\t\tconst interval = setInterval(() => {\r\n\t\t\t\tcurrentStep++;\r\n\t\t\t\tsetUploadProgress(Math.round((currentStep / totalSteps) * 100));\r\n\r\n\t\t\t\tif (currentStep >= totalSteps) {\r\n\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t// Return a mock image URL\r\n\t\t\t\t\tresolve(\r\n\t\t\t\t\t\t`https://storage.googleapis.com/mock-bucket/bird-${Date.now()}.jpg`\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleSubmit = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\tsetUploadProgress(0);\r\n\r\n\t\ttry {\r\n\t\t\tconst lat = parseFloat(formData.latitude);\r\n\t\t\tconst lng = parseFloat(formData.longitude);\r\n\t\t\tvalidateCoordinates(lat, lng);\r\n\r\n\t\t\tif (!formData.bird_scientific_name) {\r\n\t\t\t\tthrow new Error(\"Please enter the bird scientific name\");\r\n\t\t\t}\r\n\r\n\t\t\tif (!formData.State) {\r\n\t\t\t\tthrow new Error(\"Please select a state\");\r\n\t\t\t}\r\n\r\n\t\t\tif (!birdImage) {\r\n\t\t\t\tthrow new Error(\"Please upload a bird image\");\r\n\t\t\t}\r\n\r\n\t\t\tif (!user || !user.user_id) {\r\n\t\t\t\tthrow new Error(\"User session expired. Please login again.\");\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"Current user context in Upload:\", user);\r\n\t\t\tconsole.log(\"User ID being sent to upload API:\", user.user_id);\r\n\r\n\t\t\tconst formDataToSend = new FormData();\r\n\t\t\tformDataToSend.append(\"file\", birdImage);\r\n\t\t\tformDataToSend.append(\r\n\t\t\t\t\"bird_scientific_name\",\r\n\t\t\t\tformData.bird_scientific_name\r\n\t\t\t);\r\n\t\t\tformDataToSend.append(\"latitude\", lat);\r\n\t\t\tformDataToSend.append(\"longitude\", lng);\r\n\t\t\tformDataToSend.append(\"country\", formData.Country);\r\n\t\t\tformDataToSend.append(\"state\", formData.State);\r\n\t\t\tformDataToSend.append(\"user_id\", user.user_id);\r\n\t\t\tformDataToSend.append(\"event_time\", formData.event_time);\r\n\r\n\t\t\tconsole.log(\"FormData being sent to upload API:\", {\r\n\t\t\t\tbird_scientific_name: formData.bird_scientific_name,\r\n\t\t\t\tlatitude: lat,\r\n\t\t\t\tlongitude: lng,\r\n\t\t\t\tcountry: formData.Country,\r\n\t\t\t\tstate: formData.State,\r\n\t\t\t\tuser_id: user.user_id,\r\n\t\t\t\tevent_time: formData.event_time,\r\n\t\t\t});\r\n\r\n\t\t\tconst response = await fetch(`/api/upload`, {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\tbody: formDataToSend,\r\n\t\t\t});\r\n\r\n\t\t\tconst responseData = await response.json();\r\n\t\t\tconsole.log(\"Upload API Response:\", responseData);\r\n\r\n\t\t\tif (!response.ok) {\r\n\t\t\t\tthrow new Error(responseData.message || \"Upload failed\");\r\n\t\t\t}\r\n\r\n\t\t\tif (responseData.status !== \"success\") {\r\n\t\t\t\tthrow new Error(responseData.message || \"Upload failed\");\r\n\t\t\t}\r\n\r\n\t\t\t// 保存上传结果并显示成功提示框\r\n\t\t\tsetUploadResult(responseData.data);\r\n\t\t\tsetShowSuccess(true);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(\"Upload error:\", err);\r\n\t\t\tsetError(err.message || \"Upload failed\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetUploadProgress(0);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSuccessConfirm = () => {\r\n\t\tsetShowSuccess(false);\r\n\t\tnavigate(\"/home\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"upload-container\">\r\n\t\t\t<h1>Upload Bird Sighting</h1>\r\n\t\t\t{error && <div className=\"error-message\">{error}</div>}\r\n\t\t\t<form onSubmit={handleSubmit} className=\"upload-form\">\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"bird_scientific_name\">Bird Scientific Name</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tid=\"bird_scientific_name\"\r\n\t\t\t\t\t\tname=\"bird_scientific_name\"\r\n\t\t\t\t\t\tvalue={formData.bird_scientific_name}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tplaceholder=\"Enter bird scientific name (e.g., Corvus brachyrhynchos)\"\r\n\t\t\t\t\t\tmaxLength={150}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"bird_image\">Bird Image</label>\r\n\t\t\t\t\t<div className=\"image-upload-container\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\tid=\"bird_image\"\r\n\t\t\t\t\t\t\tname=\"bird_image\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tonChange={handleImageChange}\r\n\t\t\t\t\t\t\tclassName=\"form-control file-input\"\r\n\t\t\t\t\t\t\tref={fileInputRef}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"image-upload-help\">\r\n\t\t\t\t\t\t\tMaximum file size: 5MB. Accepted formats: JPEG, PNG, GIF.\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{imageError && <div className=\"image-error\">{imageError}</div>}\r\n\r\n\t\t\t\t\t\t{imagePreview && (\r\n\t\t\t\t\t\t\t<div className=\"image-preview-container\">\r\n\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\tsrc={imagePreview}\r\n\t\t\t\t\t\t\t\t\talt=\"Bird preview\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"image-preview\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"remove-image-btn\"\r\n\t\t\t\t\t\t\t\t\tonClick={handleRemoveImage}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tRemove Image\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"latitude\">Latitude</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tid=\"latitude\"\r\n\t\t\t\t\t\tname=\"latitude\"\r\n\t\t\t\t\t\tvalue={formData.latitude}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\tstep=\"0.000001\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tplaceholder=\"Enter latitude (-90 to 90)\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"longitude\">Longitude</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tid=\"longitude\"\r\n\t\t\t\t\t\tname=\"longitude\"\r\n\t\t\t\t\t\tvalue={formData.longitude}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\tstep=\"0.000001\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tplaceholder=\"Enter longitude (-180 to 180)\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"Country\">Country</label>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tid=\"Country\"\r\n\t\t\t\t\t\tname=\"Country\"\r\n\t\t\t\t\t\tvalue={formData.Country}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"United States\">United States</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t<label htmlFor=\"State\">State</label>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tid=\"State\"\r\n\t\t\t\t\t\tname=\"State\"\r\n\t\t\t\t\t\tvalue={formData.State}\r\n\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<option value=\"\">Select a state</option>\r\n\t\t\t\t\t\t{usStates.map((state) => (\r\n\t\t\t\t\t\t\t<option key={state.code} value={state.name}>\r\n\t\t\t\t\t\t\t\t{state.name}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{loading && uploadProgress > 0 && (\r\n\t\t\t\t\t<div className=\"upload-progress\">\r\n\t\t\t\t\t\t<div className=\"progress-bar\">\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclassName=\"progress-fill\"\r\n\t\t\t\t\t\t\t\tstyle={{ width: `${uploadProgress}%` }}\r\n\t\t\t\t\t\t\t></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"progress-text\">\r\n\t\t\t\t\t\t\tUploading image: {uploadProgress}%\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<button type=\"submit\" className=\"submit-button\" disabled={loading}>\r\n\t\t\t\t\t{loading ? \"Uploading...\" : \"Upload Sighting\"}\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\r\n\t\t\t{showSuccess && uploadResult && (\r\n\t\t\t\t<div className=\"success-modal\">\r\n\t\t\t\t\t<div className=\"success-content\">\r\n\t\t\t\t\t\t<div className=\"upload-success-message\">Upload Successful!</div>\r\n\t\t\t\t\t\t<div className=\"success-details\">\r\n\t\t\t\t\t\t\t<div className=\"detail-item\">\r\n\t\t\t\t\t\t\t\t<span className=\"detail-label\">Event ID</span>\r\n\t\t\t\t\t\t\t\t<span className=\"detail-value\">{uploadResult.event_id}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"detail-item\">\r\n\t\t\t\t\t\t\t\t<span className=\"detail-label\">Image ID</span>\r\n\t\t\t\t\t\t\t\t<span className=\"detail-value\">{uploadResult.image_id}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"detail-item\">\r\n\t\t\t\t\t\t\t\t<span className=\"detail-label\">Bird Scientific Name</span>\r\n\t\t\t\t\t\t\t\t<span className=\"detail-value\">\r\n\t\t\t\t\t\t\t\t\t{uploadResult.bird_info.bird_scientific_name}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"detail-item\">\r\n\t\t\t\t\t\t\t\t<span className=\"detail-label\">Total Events</span>\r\n\t\t\t\t\t\t\t\t<span className=\"detail-value\">\r\n\t\t\t\t\t\t\t\t\t{uploadResult.bird_info.event_count} sightings\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"detail-item\">\r\n\t\t\t\t\t\t\t\t<span className=\"detail-label\">Total Images</span>\r\n\t\t\t\t\t\t\t\t<span className=\"detail-value\">\r\n\t\t\t\t\t\t\t\t\t{uploadResult.bird_info.image_count} photos\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{uploadResult.bird_info.related_birds.length > 0 && (\r\n\t\t\t\t\t\t\t<div className=\"related-birds\">\r\n\t\t\t\t\t\t\t\t<h3>Related Birds</h3>\r\n\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t{uploadResult.bird_info.related_birds.map((bird, index) => (\r\n\t\t\t\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>{bird.bird_scientific_name}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>{bird.event_count} sightings</span>\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<button className=\"confirm-button\" onClick={handleSuccessConfirm}>\r\n\t\t\t\t\t\t\tBack to Home\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Upload;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAO,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EACjB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,YAAY,GAAGV,MAAM,CAAC,IAAI,CAAC;EACjC,MAAM;IAAEW;EAAK,CAAC,GAAGV,UAAU,CAACG,WAAW,CAAC;EAExC,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC;IACxCe,oBAAoB,EAAE,EAAE;IACxBC,QAAQ,EAAE,EAAE;IACZC,SAAS,EAAE,EAAE;IACbC,OAAO,EAAE,eAAe;IACxBC,KAAK,EAAE,EAAE;IACTC,UAAU,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;EACpC,CAAC,CAAC;EAEF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACyB,YAAY,EAAEC,eAAe,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC2B,UAAU,EAAEC,aAAa,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAAC6B,OAAO,EAAEC,UAAU,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC+B,KAAK,EAAEC,QAAQ,CAAC,GAAGhC,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACiC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAAC;EACvD,MAAM,CAACmC,WAAW,EAAEC,cAAc,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACqC,YAAY,EAAEC,eAAe,CAAC,GAAGtC,QAAQ,CAAC,IAAI,CAAC;EAEtD,MAAMuC,iBAAiB,GAAIC,KAAK,IAAK;IACpC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGF,KAAK,CAACG,MAAM;IACpC7B,WAAW,CAAE8B,IAAI,KAAM;MACtB,GAAGA,IAAI;MACP,CAACH,IAAI,GAAGC;IACT,CAAC,CAAC,CAAC;EACJ,CAAC;EAED,MAAMG,mBAAmB,GAAGA,CAACC,GAAG,EAAEC,GAAG,KAAK;IAAA,IAAAC,oBAAA,EAAAC,oBAAA;IACzC,IAAIC,KAAK,CAACJ,GAAG,CAAC,IAAII,KAAK,CAACH,GAAG,CAAC,EAAE;MAC7B,MAAM,IAAII,KAAK,CAAC,6BAA6B,CAAC;IAC/C;IACA,IAAIL,GAAG,GAAG,CAAC,EAAE,IAAIA,GAAG,GAAG,EAAE,EAAE;MAC1B,MAAM,IAAIK,KAAK,CAAC,6CAA6C,CAAC;IAC/D;IACA,IAAIJ,GAAG,GAAG,CAAC,GAAG,IAAIA,GAAG,GAAG,GAAG,EAAE;MAC5B,MAAM,IAAII,KAAK,CAAC,gDAAgD,CAAC;IAClE;IACA,IACC,EAAAH,oBAAA,GAAAF,GAAG,CAACM,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,cAAAL,oBAAA,uBAA5BA,oBAAA,CAA8BM,MAAM,IAAG,CAAC,IACxC,EAAAL,oBAAA,GAAAF,GAAG,CAACK,QAAQ,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,cAAAJ,oBAAA,uBAA5BA,oBAAA,CAA8BK,MAAM,IAAG,CAAC,EACvC;MACD,MAAM,IAAIH,KAAK,CAAC,+CAA+C,CAAC;IACjE;EACD,CAAC;EAED,MAAMI,iBAAiB,GAAIf,KAAK,IAAK;IACpC,MAAMgB,IAAI,GAAGhB,KAAK,CAACG,MAAM,CAACc,KAAK,CAAC,CAAC,CAAC;IAClC7B,aAAa,CAAC,IAAI,CAAC;IAEnB,IAAI,CAAC4B,IAAI,EAAE;MACVhC,YAAY,CAAC,IAAI,CAAC;MAClBE,eAAe,CAAC,IAAI,CAAC;MACrB;IACD;;IAEA;IACA,IAAI,CAAC8B,IAAI,CAACE,IAAI,CAACC,KAAK,CAAC,SAAS,CAAC,EAAE;MAChC/B,aAAa,CAAC,+CAA+C,CAAC;MAC9D;IACD;;IAEA;IACA,MAAMgC,QAAQ,GAAGJ,IAAI,CAACK,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;IAC1C,IAAID,QAAQ,GAAG,CAAC,EAAE;MACjBhC,aAAa,CAAC,kCAAkC,CAAC;MACjD;IACD;;IAEA;IACA,MAAMkC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAC,IAAK;MACtBvC,eAAe,CAACuC,CAAC,CAACtB,MAAM,CAACuB,MAAM,CAAC;IACjC,CAAC;IACDJ,MAAM,CAACK,aAAa,CAACX,IAAI,CAAC;IAE1BhC,YAAY,CAACgC,IAAI,CAAC;EACnB,CAAC;EAED,MAAMY,iBAAiB,GAAGA,CAAA,KAAM;IAC/B5C,YAAY,CAAC,IAAI,CAAC;IAClBE,eAAe,CAAC,IAAI,CAAC;IACrBE,aAAa,CAAC,IAAI,CAAC;IACnB,IAAIjB,YAAY,CAAC0D,OAAO,EAAE;MACzB1D,YAAY,CAAC0D,OAAO,CAAC3B,KAAK,GAAG,EAAE;IAChC;EACD,CAAC;EAED,MAAM4B,mBAAmB,GAAG,MAAOC,KAAK,IAAK;IAC5C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;MAC/B,MAAMC,UAAU,GAAG,EAAE;MACrB,IAAIC,WAAW,GAAG,CAAC;MAEnB,MAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAM;QAClCF,WAAW,EAAE;QACbzC,iBAAiB,CAAC4C,IAAI,CAACC,KAAK,CAAEJ,WAAW,GAAGD,UAAU,GAAI,GAAG,CAAC,CAAC;QAE/D,IAAIC,WAAW,IAAID,UAAU,EAAE;UAC9BM,aAAa,CAACJ,QAAQ,CAAC;UACvB;UACAH,OAAO,CACN,mDAAmDpD,IAAI,CAAC4D,GAAG,CAAC,CAAC,MAC9D,CAAC;QACF;MACD,CAAC,EAAE,GAAG,CAAC;IACR,CAAC,CAAC;EACH,CAAC;EAED,MAAMC,YAAY,GAAG,MAAO1C,KAAK,IAAK;IACrCA,KAAK,CAAC2C,cAAc,CAAC,CAAC;IACtBrD,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IACdE,iBAAiB,CAAC,CAAC,CAAC;IAEpB,IAAI;MACH,MAAMY,GAAG,GAAGsC,UAAU,CAACvE,QAAQ,CAACG,QAAQ,CAAC;MACzC,MAAM+B,GAAG,GAAGqC,UAAU,CAACvE,QAAQ,CAACI,SAAS,CAAC;MAC1C4B,mBAAmB,CAACC,GAAG,EAAEC,GAAG,CAAC;MAE7B,IAAI,CAAClC,QAAQ,CAACE,oBAAoB,EAAE;QACnC,MAAM,IAAIoC,KAAK,CAAC,uCAAuC,CAAC;MACzD;MAEA,IAAI,CAACtC,QAAQ,CAACM,KAAK,EAAE;QACpB,MAAM,IAAIgC,KAAK,CAAC,uBAAuB,CAAC;MACzC;MAEA,IAAI,CAAC5B,SAAS,EAAE;QACf,MAAM,IAAI4B,KAAK,CAAC,4BAA4B,CAAC;MAC9C;MAEA,IAAI,CAACvC,IAAI,IAAI,CAACA,IAAI,CAACyE,OAAO,EAAE;QAC3B,MAAM,IAAIlC,KAAK,CAAC,2CAA2C,CAAC;MAC7D;MAEAmC,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAE3E,IAAI,CAAC;MACpD0E,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAE3E,IAAI,CAACyE,OAAO,CAAC;MAE9D,MAAMG,cAAc,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACrCD,cAAc,CAACE,MAAM,CAAC,MAAM,EAAEnE,SAAS,CAAC;MACxCiE,cAAc,CAACE,MAAM,CACpB,sBAAsB,EACtB7E,QAAQ,CAACE,oBACV,CAAC;MACDyE,cAAc,CAACE,MAAM,CAAC,UAAU,EAAE5C,GAAG,CAAC;MACtC0C,cAAc,CAACE,MAAM,CAAC,WAAW,EAAE3C,GAAG,CAAC;MACvCyC,cAAc,CAACE,MAAM,CAAC,SAAS,EAAE7E,QAAQ,CAACK,OAAO,CAAC;MAClDsE,cAAc,CAACE,MAAM,CAAC,OAAO,EAAE7E,QAAQ,CAACM,KAAK,CAAC;MAC9CqE,cAAc,CAACE,MAAM,CAAC,SAAS,EAAE9E,IAAI,CAACyE,OAAO,CAAC;MAC9CG,cAAc,CAACE,MAAM,CAAC,YAAY,EAAE7E,QAAQ,CAACO,UAAU,CAAC;MAExDkE,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAE;QACjDxE,oBAAoB,EAAEF,QAAQ,CAACE,oBAAoB;QACnDC,QAAQ,EAAE8B,GAAG;QACb7B,SAAS,EAAE8B,GAAG;QACd4C,OAAO,EAAE9E,QAAQ,CAACK,OAAO;QACzB0E,KAAK,EAAE/E,QAAQ,CAACM,KAAK;QACrBkE,OAAO,EAAEzE,IAAI,CAACyE,OAAO;QACrBjE,UAAU,EAAEP,QAAQ,CAACO;MACtB,CAAC,CAAC;MAEF,MAAMyE,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAa,EAAE;QAC3CC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAER;MACP,CAAC,CAAC;MAEF,MAAMS,YAAY,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAC1CZ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEU,YAAY,CAAC;MAEjD,IAAI,CAACJ,QAAQ,CAACM,EAAE,EAAE;QACjB,MAAM,IAAIhD,KAAK,CAAC8C,YAAY,CAACG,OAAO,IAAI,eAAe,CAAC;MACzD;MAEA,IAAIH,YAAY,CAACI,MAAM,KAAK,SAAS,EAAE;QACtC,MAAM,IAAIlD,KAAK,CAAC8C,YAAY,CAACG,OAAO,IAAI,eAAe,CAAC;MACzD;;MAEA;MACA9D,eAAe,CAAC2D,YAAY,CAACK,IAAI,CAAC;MAClClE,cAAc,CAAC,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOmE,GAAG,EAAE;MACbjB,OAAO,CAACvD,KAAK,CAAC,eAAe,EAAEwE,GAAG,CAAC;MACnCvE,QAAQ,CAACuE,GAAG,CAACH,OAAO,IAAI,eAAe,CAAC;IACzC,CAAC,SAAS;MACTtE,UAAU,CAAC,KAAK,CAAC;MACjBI,iBAAiB,CAAC,CAAC,CAAC;IACrB;EACD,CAAC;EAED,MAAMsE,oBAAoB,GAAGA,CAAA,KAAM;IAClCpE,cAAc,CAAC,KAAK,CAAC;IACrB1B,QAAQ,CAAC,OAAO,CAAC;EAClB,CAAC;EAED,oBACCH,OAAA;IAAKkG,SAAS,EAAC,kBAAkB;IAAAC,QAAA,gBAChCnG,OAAA;MAAAmG,QAAA,EAAI;IAAoB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAC5B/E,KAAK,iBAAIxB,OAAA;MAAKkG,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAE3E;IAAK;MAAA4E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACtDvG,OAAA;MAAMwG,QAAQ,EAAE7B,YAAa;MAACuB,SAAS,EAAC,aAAa;MAAAC,QAAA,gBACpDnG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,sBAAsB;UAAAN,QAAA,EAAC;QAAoB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAClEvG,OAAA;UACCmD,IAAI,EAAC,MAAM;UACXuD,EAAE,EAAC,sBAAsB;UACzBxE,IAAI,EAAC,sBAAsB;UAC3BC,KAAK,EAAE7B,QAAQ,CAACE,oBAAqB;UACrCmG,QAAQ,EAAE3E,iBAAkB;UAC5B4E,QAAQ;UACRV,SAAS,EAAC,cAAc;UACxBW,WAAW,EAAC,0DAA0D;UACtEC,SAAS,EAAE;QAAI;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACf,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAENvG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,YAAY;UAAAN,QAAA,EAAC;QAAU;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC9CvG,OAAA;UAAKkG,SAAS,EAAC,wBAAwB;UAAAC,QAAA,gBACtCnG,OAAA;YACCmD,IAAI,EAAC,MAAM;YACXuD,EAAE,EAAC,YAAY;YACfxE,IAAI,EAAC,YAAY;YACjB6E,MAAM,EAAC,SAAS;YAChBJ,QAAQ,EAAE3D,iBAAkB;YAC5BkD,SAAS,EAAC,yBAAyB;YACnCc,GAAG,EAAE5G;UAAa;YAAAgG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC,eACFvG,OAAA;YAAKkG,SAAS,EAAC,mBAAmB;YAAAC,QAAA,EAAC;UAEnC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EAELnF,UAAU,iBAAIpB,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,EAAE/E;UAAU;YAAAgF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,EAE7DrF,YAAY,iBACZlB,OAAA;YAAKkG,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACvCnG,OAAA;cACCiH,GAAG,EAAE/F,YAAa;cAClBgG,GAAG,EAAC,cAAc;cAClBhB,SAAS,EAAC;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzB,CAAC,eACFvG,OAAA;cACCmD,IAAI,EAAC,QAAQ;cACb+C,SAAS,EAAC,kBAAkB;cAC5BiB,OAAO,EAAEtD,iBAAkB;cAAAsC,QAAA,EAC3B;YAED;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CACL;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAENvG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,UAAU;UAAAN,QAAA,EAAC;QAAQ;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC1CvG,OAAA;UACCmD,IAAI,EAAC,QAAQ;UACbuD,EAAE,EAAC,UAAU;UACbxE,IAAI,EAAC,UAAU;UACfC,KAAK,EAAE7B,QAAQ,CAACG,QAAS;UACzBkG,QAAQ,EAAE3E,iBAAkB;UAC5BoF,IAAI,EAAC,UAAU;UACfR,QAAQ;UACRV,SAAS,EAAC,cAAc;UACxBW,WAAW,EAAC;QAA4B;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAENvG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,WAAW;UAAAN,QAAA,EAAC;QAAS;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC5CvG,OAAA;UACCmD,IAAI,EAAC,QAAQ;UACbuD,EAAE,EAAC,WAAW;UACdxE,IAAI,EAAC,WAAW;UAChBC,KAAK,EAAE7B,QAAQ,CAACI,SAAU;UAC1BiG,QAAQ,EAAE3E,iBAAkB;UAC5BoF,IAAI,EAAC,UAAU;UACfR,QAAQ;UACRV,SAAS,EAAC,cAAc;UACxBW,WAAW,EAAC;QAA+B;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAENvG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,SAAS;UAAAN,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACxCvG,OAAA;UACC0G,EAAE,EAAC,SAAS;UACZxE,IAAI,EAAC,SAAS;UACdC,KAAK,EAAE7B,QAAQ,CAACK,OAAQ;UACxBgG,QAAQ,EAAE3E,iBAAkB;UAC5B4E,QAAQ;UACRV,SAAS,EAAC,cAAc;UACxBmB,QAAQ;UAAAlB,QAAA,eAERnG,OAAA;YAAQmC,KAAK,EAAC,eAAe;YAAAgE,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAENvG,OAAA;QAAKkG,SAAS,EAAC,YAAY;QAAAC,QAAA,gBAC1BnG,OAAA;UAAOyG,OAAO,EAAC,OAAO;UAAAN,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACpCvG,OAAA;UACC0G,EAAE,EAAC,OAAO;UACVxE,IAAI,EAAC,OAAO;UACZC,KAAK,EAAE7B,QAAQ,CAACM,KAAM;UACtB+F,QAAQ,EAAE3E,iBAAkB;UAC5B4E,QAAQ;UACRV,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAExBnG,OAAA;YAAQmC,KAAK,EAAC,EAAE;YAAAgE,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,EACvC1G,QAAQ,CAACyH,GAAG,CAAEjC,KAAK,iBACnBrF,OAAA;YAAyBmC,KAAK,EAAEkD,KAAK,CAACnD,IAAK;YAAAiE,QAAA,EACzCd,KAAK,CAACnD;UAAI,GADCmD,KAAK,CAACkC,IAAI;YAAAnB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEf,CACR,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,EAELjF,OAAO,IAAII,cAAc,GAAG,CAAC,iBAC7B1B,OAAA;QAAKkG,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC/BnG,OAAA;UAAKkG,SAAS,EAAC,cAAc;UAAAC,QAAA,eAC5BnG,OAAA;YACCkG,SAAS,EAAC,eAAe;YACzBsB,KAAK,EAAE;cAAEC,KAAK,EAAE,GAAG/F,cAAc;YAAI;UAAE;YAAA0E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNvG,OAAA;UAAKkG,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAC,mBACb,EAACzE,cAAc,EAAC,GAClC;QAAA;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACL,eAEDvG,OAAA;QAAQmD,IAAI,EAAC,QAAQ;QAAC+C,SAAS,EAAC,eAAe;QAACmB,QAAQ,EAAE/F,OAAQ;QAAA6E,QAAA,EAChE7E,OAAO,GAAG,cAAc,GAAG;MAAiB;QAAA8E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EAEN3E,WAAW,IAAIE,YAAY,iBAC3B9B,OAAA;MAAKkG,SAAS,EAAC,eAAe;MAAAC,QAAA,eAC7BnG,OAAA;QAAKkG,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC/BnG,OAAA;UAAKkG,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAChEvG,OAAA;UAAKkG,SAAS,EAAC,iBAAiB;UAAAC,QAAA,gBAC/BnG,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC3BnG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9CvG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAErE,YAAY,CAAC4F;YAAQ;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC,eACNvG,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC3BnG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC9CvG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAErE,YAAY,CAAC6F;YAAQ;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CAAC,eACNvG,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC3BnG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAoB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC1DvG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAC5BrE,YAAY,CAAC8F,SAAS,CAACpH;YAAoB;cAAA4F,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNvG,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC3BnG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAClDvG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,GAC5BrE,YAAY,CAAC8F,SAAS,CAACC,WAAW,EAAC,YACrC;YAAA;cAAAzB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNvG,OAAA;YAAKkG,SAAS,EAAC,aAAa;YAAAC,QAAA,gBAC3BnG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAClDvG,OAAA;cAAMkG,SAAS,EAAC,cAAc;cAAAC,QAAA,GAC5BrE,YAAY,CAAC8F,SAAS,CAACE,WAAW,EAAC,SACrC;YAAA;cAAA1B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,EAELzE,YAAY,CAAC8F,SAAS,CAACG,aAAa,CAAChF,MAAM,GAAG,CAAC,iBAC/C/C,OAAA;UAAKkG,SAAS,EAAC,eAAe;UAAAC,QAAA,gBAC7BnG,OAAA;YAAAmG,QAAA,EAAI;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtBvG,OAAA;YAAAmG,QAAA,EACErE,YAAY,CAAC8F,SAAS,CAACG,aAAa,CAACT,GAAG,CAAC,CAACU,IAAI,EAAEC,KAAK,kBACrDjI,OAAA;cAAAmG,QAAA,gBACCnG,OAAA;gBAAAmG,QAAA,EAAO6B,IAAI,CAACxH;cAAoB;gBAAA4F,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACxCvG,OAAA;gBAAAmG,QAAA,GAAO6B,IAAI,CAACH,WAAW,EAAC,YAAU;cAAA;gBAAAzB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC;YAAA,GAFjC0B,KAAK;cAAA7B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAGV,CACJ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CACL,eAEDvG,OAAA;UAAQkG,SAAS,EAAC,gBAAgB;UAACiB,OAAO,EAAElB,oBAAqB;UAAAE,QAAA,EAAC;QAElE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAER;AAACrG,EAAA,CAvZQD,MAAM;EAAA,QACGL,WAAW;AAAA;AAAAsI,EAAA,GADpBjI,MAAM;AAyZf,eAAeA,MAAM;AAAC,IAAAiI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}